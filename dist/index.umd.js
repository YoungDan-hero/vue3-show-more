!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("vue")):"function"==typeof define&&define.amd?define(["exports","vue"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).VueShowMore={},e.Vue)}(this,(function(e,t){"use strict";const o={class:"vue-show-more__text"},n={class:"vue-show-more__text"},l=((e,t)=>{const o=e.__vccOpts||e;for(const[n,l]of t)o[n]=l;return o})(t.defineComponent({__name:"ShowMore",props:{maxLines:{default:3},expandText:{default:"展开"},collapseText:{default:"收起"},class:{default:""},expandButtonClass:{default:""},actionPosition:{default:"bottom"}},emits:["expand"],setup(e,{emit:l}){const s=e,a=t.computed((()=>s.class)),i=t.computed((()=>({display:"-webkit-box",WebkitBoxOrient:"vertical",overflow:"hidden",WebkitLineClamp:c.value?void 0:s.maxLines}))),d=l,c=t.ref(!1),r=t.ref(!1),u=t.ref(null),p=t.ref(null),v=()=>{c.value=!c.value,d("expand",c.value)},m=()=>{if(!u.value||!p.value)return;const e=u.value,t=p.value,o=e.style.cssText,n=t.style.cssText,l=t.cloneNode(!0);l.style.cssText=`\n    position: absolute;\n    visibility: hidden;\n    width: ${t.offsetWidth}px;\n    display: -webkit-box;\n    -webkit-box-orient: vertical;\n    -webkit-line-clamp: ${s.maxLines};\n    overflow: hidden;\n  `,document.body.appendChild(l);const a=l.offsetHeight;document.body.removeChild(l),e.style.cssText="display: block !important; overflow: visible !important; -webkit-line-clamp: none !important;",t.style.cssText="";const i=t.offsetHeight;e.style.cssText=o,t.style.cssText=n;const d=i>a;r.value!==d&&(r.value=d,!d&&c.value&&(c.value=!1))},f=new MutationObserver((()=>{t.nextTick((()=>{m()}))}));return t.onMounted((()=>{m(),window.addEventListener("resize",m),p.value&&f.observe(p.value,{childList:!0,subtree:!0,characterData:!0})})),t.onUnmounted((()=>{window.removeEventListener("resize",m),f.disconnect()})),(e,l)=>(t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(["vue-show-more",a.value])},[t.createElementVNode("div",{ref_key:"contentRef",ref:u,class:t.normalizeClass(["vue-show-more__content",{"vue-show-more__content--expanded":c.value,"vue-show-more__content--inline":"inline"===e.actionPosition&&!c.value}]),style:t.normalizeStyle(i.value)},[t.createElementVNode("div",{ref_key:"innerContentRef",ref:p},[t.renderSlot(e.$slots,"default",{},void 0,!0)],512)],6),r.value&&"inline"===e.actionPosition&&!c.value?(t.openBlock(),t.createElementBlock("div",{key:0,class:"vue-show-more__mask",onClick:t.withModifiers(v,["stop"])},[t.renderSlot(e.$slots,"action",{isExpanded:c.value,expandText:e.expandText,collapseText:e.collapseText},(()=>[t.createElementVNode("span",o,t.toDisplayString(e.expandText),1)]),!0)])):t.createCommentVNode("",!0),r.value&&("bottom"===e.actionPosition||c.value)?(t.openBlock(),t.createElementBlock("span",{key:1,class:"vue-show-more__action-bottom",onClick:t.withModifiers(v,["stop"])},[t.renderSlot(e.$slots,"action",{isExpanded:c.value,expandText:e.expandText,collapseText:e.collapseText},(()=>[t.createElementVNode("span",n,t.toDisplayString(c.value?e.collapseText:e.expandText),1)]),!0)])):t.createCommentVNode("",!0)],2))}}),[["__scopeId","data-v-c64aef8e"]]),s={install:e=>{e.component("ShowMore",l)}};e.ShowMore=l,e.default=s,Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})}));
//# sourceMappingURL=index.umd.js.map
