!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("vue")):"function"==typeof define&&define.amd?define(["exports","vue"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).VueShowMore={},e.Vue)}(this,(function(e,t){"use strict";const o={class:"vue-show-more__text"},n=((e,t)=>{const o=e.__vccOpts||e;for(const[n,l]of t)o[n]=l;return o})(t.defineComponent({__name:"ShowMore",props:{maxLines:{default:3},expandText:{default:"展开"},collapseText:{default:"收起"},class:{default:""},expandButtonClass:{default:""},actionPosition:{default:"bottom"},maskBackground:{default:"white"}},emits:["expand"],setup(e,{emit:n}){const l=e,a=t.computed((()=>l.class)),s=t.computed((()=>({display:"-webkit-box",WebkitBoxOrient:"vertical",overflow:"hidden",WebkitLineClamp:r.value?void 0:l.maxLines}))),i=n,r=t.ref(!1),d=t.ref(!1),c=t.ref(null),u=t.ref(null),p=()=>{r.value=!r.value,i("expand",r.value)},v=()=>{if(!c.value||!u.value)return;const e=c.value,t=u.value,o=e.style.cssText,n=t.style.cssText,a=t.cloneNode(!0);a.style.cssText=`\n    position: absolute;\n    visibility: hidden;\n    width: ${t.offsetWidth}px;\n    display: -webkit-box;\n    -webkit-box-orient: vertical;\n    -webkit-line-clamp: ${l.maxLines};\n    overflow: hidden;\n  `,document.body.appendChild(a);const s=a.offsetHeight;document.body.removeChild(a),e.style.cssText="display: block !important; overflow: visible !important; -webkit-line-clamp: none !important;",t.style.cssText="";const i=t.offsetHeight;e.style.cssText=o,t.style.cssText=n;const p=i>s;d.value!==p&&(d.value=p,!p&&r.value&&(r.value=!1))},m=new MutationObserver((()=>{t.nextTick((()=>{v()}))}));return t.onMounted((()=>{v(),window.addEventListener("resize",v),u.value&&m.observe(u.value,{childList:!0,subtree:!0,characterData:!0})})),t.onUnmounted((()=>{window.removeEventListener("resize",v),m.disconnect()})),(e,n)=>(t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(["vue-show-more",a.value])},[t.createElementVNode("div",{ref_key:"contentRef",ref:c,class:t.normalizeClass(["vue-show-more__content",{"vue-show-more__content--expanded":r.value,"vue-show-more__content--inline":"inline"===e.actionPosition&&!r.value}]),style:t.normalizeStyle(s.value)},[t.createElementVNode("div",{ref_key:"innerContentRef",ref:u},[t.renderSlot(e.$slots,"default",{},void 0,!0)],512)],6),d.value&&"inline"===e.actionPosition&&!r.value?(t.openBlock(),t.createElementBlock("div",{key:0,class:"vue-show-more__mask",style:t.normalizeStyle({background:`linear-gradient(to right, transparent, ${e.maskBackground} 3em)`}),onClick:t.withModifiers(p,["stop"])},[t.renderSlot(e.$slots,"action",{isExpanded:r.value,expandText:e.expandText,collapseText:e.collapseText},(()=>[t.createElementVNode("span",{class:"vue-show-more__text",style:t.normalizeStyle({background:e.maskBackground})},t.toDisplayString(e.expandText),5)]),!0)],4)):t.createCommentVNode("",!0),d.value&&("bottom"===e.actionPosition||r.value)?(t.openBlock(),t.createElementBlock("span",{key:1,class:"vue-show-more__action-bottom",onClick:t.withModifiers(p,["stop"])},[t.renderSlot(e.$slots,"action",{isExpanded:r.value,expandText:e.expandText,collapseText:e.collapseText},(()=>[t.createElementVNode("span",o,t.toDisplayString(r.value?e.collapseText:e.expandText),1)]),!0)])):t.createCommentVNode("",!0)],2))}}),[["__scopeId","data-v-8e9cc5e6"]]),l={install:e=>{e.component("ShowMore",n)}};e.ShowMore=n,e.default=l,Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})}));
//# sourceMappingURL=index.umd.js.map
